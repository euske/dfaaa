<project name="MyProject" default="compile" basedir=".">
  
  <property name="src" location="src" />
  <property name="lib" location="lib" />
  <property name="build" location="build" />
  <property name="input" location="samples/f5.java" />
  <property name="out_gv" location="samples/f5.gv" />
  <property name="out_svg" location="samples/f5.svg" />
  
  <target name="init">
    <mkdir dir="${build}" />
  </target>

  <target name="clean">
    <delete dir="${build}" />
  </target>
  
  <target name="compile" depends="init">
    <javac srcdir="${src}" destdir="${build}" includeAntRuntime="false">
      <compilerarg value="-Xlint" />
      <classpath location="${lib}/org.eclipse.jdt.core.jar" />
      <classpath location="${lib}/org.eclipse.osgi.jar" />
      <classpath location="${lib}/org.eclipse.core.runtime.jar" />
      <classpath location="${lib}/org.eclipse.core.resources.jar" />
      <classpath location="${lib}/org.eclipse.core.jobs.jar" />
      <classpath location="${lib}/org.eclipse.core.contenttype.jar" />
      <classpath location="${lib}/org.eclipse.equinox.common.jar" />
      <classpath location="${lib}/org.eclipse.equinox.preferences.jar" />
    </javac>
  </target>

  <target name="test" depends="compile">
    <java classname="Java2DF">
      <arg value="-o" />
      <arg file="${out_gv}" />
      <arg file="${input}" />
      <classpath location="${build}" />
      <classpath location="${lib}/org.eclipse.jdt.core.jar" />
      <classpath location="${lib}/org.eclipse.osgi.jar" />
      <classpath location="${lib}/org.eclipse.core.runtime.jar" />
      <classpath location="${lib}/org.eclipse.core.resources.jar" />
      <classpath location="${lib}/org.eclipse.core.jobs.jar" />
      <classpath location="${lib}/org.eclipse.core.contenttype.jar" />
      <classpath location="${lib}/org.eclipse.equinox.common.jar" />
      <classpath location="${lib}/org.eclipse.equinox.preferences.jar" />
    </java>
    <exec executable="dot">
      <arg value="-Tsvg" />
      <arg value="-o" />
      <arg file="${out_svg}" />
      <arg file="${out_gv}" />
    </exec>
  </target>
  
</project>
